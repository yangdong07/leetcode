### 81. Search in Rotated Sorted Array II

**Array**, **Binary Search**    [ğŸ§¡](https://leetcode.com/problems/search-in-rotated-sorted-array-ii)    

#### Description

Suppose an array sorted in ascending order is rotated at some pivot unknown to you beforehand.

(i.e., `[0,0,1,2,2,5,6]` might become `[2,5,6,0,0,1,2]`).

You are given a target value to search. If found in the array return `true`, otherwise return `false`.

**Example 1:**

```
Input: nums = [2,5,6,0,0,1,2], target = 0
Output: true
```

**Example 2:**

```
Input: nums = [2,5,6,0,0,1,2], target = 3
Output: false
```

**Follow up:**
- This is a follow up problem toÂ Search in Rotated Sorted Array, where `nums` may contain duplicates.
- Would this affect the run-time complexity? How and why?

#### Analysis

è¿™é¢˜ä¸ 33 é¢˜ä¸€æ ·ã€‚ä¸è¿‡æ•°ç»„ä¸­å…è®¸é‡å¤æ•°å­—ã€‚ åªè¦æ±‚è¿”å›æ‰¾åˆ°ä¸å¦ï¼Œä¸è¦æ±‚è¿”å›ä½ç½®ã€‚ æœ€å…³é”®çš„æ˜¯è¦æ±‚å¤æ‚åº¦ï¼š $O(\log N)$

```
     /
    /
----    ----
       /
      /
```

äºŒåˆ†æŸ¥æ‰¾æ³•æœ¬è´¨ä¸Šå…¶å®æ˜¯é€šè¿‡äºŒåˆ†çš„æ–¹å¼ç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œå°†é—®é¢˜ä» `T(N)` å˜æˆ `T(N/2)`

å…ˆåœˆå®šèŒƒå›´ï¼š `A[l...r]`ï¼Œ `mid = l + (r - l) // 2`ï¼Œè¿™ç§è®¡ç®— `mid` çš„æ–¹å¼å¯ä»¥é¿å… æ— é™å¾ªç¯ã€‚

- `[mid] == target`ï¼Œ è¿”å› `True`
- `[mid] < [r]`ï¼Œ å¯ä»¥çœ‹å‡ºæ¥è¦ä¹ˆ`l, mid, r`éƒ½åœ¨å·¦åŠéƒ¨ï¼Œè¦ä¹ˆ`mid, r`åœ¨å³åŠéƒ¨ï¼ˆä¸Šå›¾ï¼‰
    - `[mid] < target <= [r]`ï¼Œ ç¼©å°èŒƒå›´ï¼Œåœ¨å³è¾¹æ‰¾ï¼š `l, r = mid + 1, r`
    - å‰©ä¸‹ä¸¤ç§æƒ…å†µ ï¼š `target < [mid]` æˆ–è€… `target > [r]`ï¼Œ éƒ½åœ¨å·¦è¾¹æ‰¾ï¼š `l, r = l, mid - 1`
- `[mid] > [r]`ï¼Œ å¯ä»¥çœ‹å‡ºï¼š `l, mid` åœ¨å·¦åŠéƒ¨ï¼Œ `r` åœ¨å³åŠéƒ¨
    - `[l] <= target < [mid]`ï¼Œ åœ¨å·¦è¾¹æ‰¾ï¼š `l, r = l, mid - 1`
    - å¦åˆ™ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š `[l] > target` æˆ–è€… `[mid] < target`ï¼Œ è¿™ä¸¤ç§æƒ…å†µéƒ½åœ¨å³è¾¹æ‰¾ï¼š `l, r = mid + 1, r`
- `[mid] == [r]`ï¼Œ è¿™ç§æƒ…å†µåªå¯èƒ½å‡ºç°åœ¨ `[mid...r]` éƒ½ç›¸åŒï¼Œæˆ–è€…ä¸¤è¾¹ç›¸ç­‰ï¼Œä¸­é—´æœ‰å³°/è°·ã€‚å¦‚æœæ•´ä¸ªæ•°ç»„éƒ½æ˜¯è¿™æ ·çš„ï¼Œä¸¾ä¸ªä¾‹å­ ï¼š `[0, 1, 0]` æˆ–è€… `[0, -1, 0]`ï¼Œ é‚£ä¹ˆæ²¡åŠæ³•é€šè¿‡äºŒåˆ†ç¼©å°èŒƒå›´ï¼Œåªèƒ½ `r -= 1`ã€‚ è¿™æ˜¯æœ€åæƒ…å†µï¼Œéœ€è¦ $O(N)$

```python
def search(self, nums, target):
    if not nums:
        return False

    l, r = 0, len(nums) - 1
    while l < r:
        mid = l + (r - l) // 2
        if nums[mid] == target:
            return True

        if nums[mid] < nums[r]:
            if nums[mid] < target <= nums[r]:
                l = mid + 1
            else:
                r = mid - 1
        elif nums[mid] > nums[r]:
            if nums[l] <= target < nums[mid]:
                r = mid - 1
            else:
                l = mid + 1
        else:
            r -= 1
    return nums[l] == target
```



#### [Code](../python/81.%20Search%20in%20Rotated%20Sorted%20Array%20II.py)
