### 4. Median of Two Sorted Arrays

**Array**, **Binary Search**, **Divide and Conquer**    [â¤ï¸](https://leetcode.com/problems/median-of-two-sorted-arrays)    	[ðŸ’¡](https://leetcode.com/articles/median-of-two-sorted-arrays)

#### Description

There are two sorted arrays nums1 and nums2 of size m and n respectively.

Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).

Example 1:

```
nums1 = [1, 3]
nums2 = [2]

The median is 2.0
```

Example 2:

```
nums1 = [1, 2]
nums2 = [3, 4]

The median is (2 + 3)/2 = 2.5
```

#### Analysis

è§£é¢˜æ€è·¯ï¼Œå¾ˆå·§å¦™ï¼Œå‚è€ƒè®¨è®ºåŒºçš„æ¥ç€ï¼š

ä»€ä¹ˆæ˜¯ä¸­ä½æ•°ï¼Œå°±æ˜¯æŽ’åºæ•°ç»„ä¸­é—´çš„ä¸¤ä¸ªæ•°ï¼ˆæˆ–ä¸€ä¸ªæ•°ï¼‰çš„å¹³å‡æ•°ã€‚

é‚£ä¹ˆä¸¤ä¸ªæ•°ç»„çš„ä¸­ä½æ•°æ€Žä¹ˆæ‰¾ã€‚ æ³¨æ„æŠŠä¸¤ä¸ªæœ‰åºæ•°ç»„è¿™æ ·æŽ’æ”¾ï¼ˆæ€»æ˜¯å‡è®¾ Aé•¿åº¦ $m$ ä¸å¤§äºŽ Bé•¿åº¦ $n$ï¼‰ï¼š
```
A:      [........]
B:  [.................]
```
åœ¨ä¸­å¿ƒä½ç½®ï¼ˆæ—‹è½¬å¯¹ç§°è½´ä¸­å¿ƒï¼Ÿï¼‰åˆ‡ä¸€åˆ€ï¼Œä¾‹å¦‚ï¼š

```
A:      [....|....]
B:  [........|.........]
```
æˆ–è€…

```
A:      [\........]
          \
           \
            \
             \
              \
               \
                \
                 \
B:  [.............\....]   ^_^
```
ä¿è¯å·¦ä¾§çš„å’Œå³ä¾§çš„æ•°é‡ç›¸ç­‰ï¼ˆæˆ–è€…å·¦è¾¹çš„æ¯”å³è¾¹çš„å¤š1ä¸ªï¼Œå¦‚æžœæ€»æ•°æ˜¯å¥‡æ•°çš„è¯ï¼‰ã€‚å½“å·¦ä¾§æ•°æ€»æ˜¯ä¸å¤§äºŽå³ä¾§æ•°çš„æ—¶å€™ï¼Œå…¶å®žå°±æ˜¯æ‰¾åˆ°äº†ä¸­ä½æ•°çš„ä½ç½®ã€‚

ä¸Šé¢çš„åˆ‡å‰²ä½ç½® $i \in [0, m]$ï¼Œ ä¸‹é¢çš„åˆ‡å‰²ä½ç½® $j \in [(n - m)/2, (n + m)/2]$ã€‚

å¦‚æžœæ€»æ•°æ˜¯å¶æ•°ï¼Œåˆ™ $i,j$ æ»¡è¶³ï¼š $i + j = (n + m) /2 $ã€‚

å¦‚æžœæ€»æ•°æ˜¯å¥‡æ•°ï¼Œåˆ™ $i,j$ æ»¡è¶³ï¼š $i + j = (n + m + 1) / 2 $ã€‚ ç»Ÿä¸€å†™å°±æ˜¯ $i + j = (n + m + 1 ) / 2$ï¼Œ å¶æ•°çš„0.5ä¼šèˆåŽ»ã€‚

æ‰€ä»¥é—®é¢˜æœ¬è´¨ä¸Šå°±æ˜¯ä¸ªäºŒåˆ†æŸ¥æ‰¾é¢˜ï¼ŒæŸ¥æ‰¾èŒƒå›´ $i \in [0, m]$ï¼Œ ä¸‹è¾¹æ•°ç»„çš„åˆ‡å‰²ä½ç½® $j = (n + m + 1) / 2 - i$

å…¶ä»–ç»†èŠ‚ï¼š

1. å¯¹äºŽåˆ‡å‰²ä½ç½® $i,j$ï¼Œ å¦‚æžœ $A[i-1] > B[j]$ çš„è¯ï¼ŒåŒæ—¶è¯´æ˜Ž $A[i] \ge A[i-1] > B[j] \ge B[j-1]$ï¼Œ è¯´æ˜Žåœ¨ $i$ åˆ‡å‰²ä½ç½®ï¼Œä¸Šé¢çš„æ•°æ™®éæ¯”ä¸‹é¢çš„æ•°å¤§ï¼Œ$i$ åº”è¯¥åå°ä¸€ç‚¹ã€‚æ”¶ç¼©æŸ¥æ‰¾èŒƒå›´åˆ° $[imin, i-1]$
2. å¦‚æžœ $B[j-1] > A[i]$ çš„è¯ï¼Œ åŒæ—¶è¯´æ˜Ž $B[j] \ge B[j-1] > A[i] \ge A[i-1]$ï¼Œè¯´æ˜Ž $i$ çš„åˆ‡å‰²ä½ç½®ï¼Œä¸Šé¢çš„æ•°æ™®éæ¯”ä¸‹é¢çš„æ•°å°ï¼Œ$i$ åº”è¯¥åå¤§ä¸€äº›ã€‚æ”¶ç¼©æŸ¥æ‰¾èŒƒå›´åˆ° $[i+1, imax]$
3. å¦‚æžœæ€»æ•°æ˜¯å¥‡æ•°çš„è¯ï¼Œè¿”å›žå·¦ä¾§æ•°çš„æœ€å¤§å€¼å³å¯ï¼› å¦‚æžœæ€»æ•°æ˜¯å¶æ•°çš„è¯ï¼Œéœ€è¦æ±‚ä¸ªå¹³å‡å€¼ã€‚åŒæ—¶è¿˜è¦æ³¨æ„è¾¹ç•Œæ¡ä»¶ã€‚


æ€è·¯å¾ˆæ¸…æ™°ï¼Œä½†æ˜¯è¾¹ç•Œæ¡ä»¶ä»¥åŠç»†èŠ‚éƒ½å¾ˆéº»çƒ¦ã€‚ è‡ªå·±å†™ä¸çŸ¥é“å†™åˆ°ä½•æ—¶åŽ»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚

#### Solution

```python
class Solution:
    def findMedianSortedArrays(self, nums1, nums2):
        """
        :type nums1: List[int]
        :type nums2: List[int]
        :rtype: float
        """
        m, n = len(nums1), len(nums2)
        if m > n:
            nums1, nums2, m, n = nums2, nums1, n, m

        A, B = nums1, nums2
        imin, imax, half_len = 0, m, (m + n + 1) // 2
        while imin <= imax:
            i = (imin + imax) // 2
            j = half_len - i
            if i < m and B[j-1] > A[i]:
                # i is too small, must increase it
                imin = i + 1
            elif i > 0 and A[i-1] > B[j]:
                # i is too big, must decrease it
                imax = i - 1
            else:
                # i is perfect

                if i == 0: max_of_left = B[j-1]
                elif j == 0: max_of_left = A[i-1]
                else: max_of_left = max(A[i-1], B[j-1])

                if (m + n) % 2 == 1:
                    return max_of_left

                if i == m: min_of_right = B[j]
                elif j == n: min_of_right = A[i]
                else: min_of_right = min(A[i], B[j])

                return (max_of_left + min_of_right) / 2.0

Solution().findMedianSortedArrays([1, 3], [2])
```
